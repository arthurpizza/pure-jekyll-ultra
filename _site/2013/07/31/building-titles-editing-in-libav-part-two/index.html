<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="One of the biggest challenges with making a video in LibAV/FFmpeg is the lack of title cards.  Using the GIMP (or ImageMagick) you can make some very awesome...">

    <title>Building Titles (Editing in LibAV part two!)</title>

<link rel="stylesheet" href="/css/pure-min.css">
<link rel="stylesheet" href="/css/grids-responsive-min.css">
<link rel="stylesheet" href="/css/blog.css">

</head>


<body>

<div id="layout" class="pure-g">

    <div class="sidebar pure-u-1 pure-u-md-1-4">
        <div class="header">
						<a href="/"><img width="192" src="/img/me.jpg"></a>
            <h1 class="brand-title"><a class="site-title" href="/">n0pe.org</a></h1>
            <h2 class="brand-tagline">The Home of Arthur Reeder
</h2>

            <nav class="nav">
                <ul class="nav-list">
        
          
                    <li class="nav-item">
                        <a class="pure-button page-link" href="/about/">About</a>
                    </li>
          
        
          
        
          
        
          
                    <li class="nav-item">
                        <a class="pure-button page-link" href="/music/">Music</a>
                    </li>
          
        
          
                    <li class="nav-item">
                        <a class="pure-button page-link" href="/pulp-fiction-chronological-cut/">Pulp Fiction: The Chronological Cut</a>
                    </li>
          
        
          
                    <li class="nav-item">
                        <a class="pure-button page-link" href="/tos/">Terms of Service</a>
                    </li>
          
        
                </ul>
            </nav>
        </div>
    </div>
</div>



        <div class="content pure-u-1 pure-u-md-3-4">
        <div>
            <!-- A wrapper for all the blog posts -->
            <div class="posts">
                <h1 class="content-subhead">Jul 31, 2013</h1>

                <!-- A single blog post -->
                <section class="post">
                    <header class="post-header">
                        <img class="post-avatar" height="48" width="48" src="/img/me.jpg">

                        <h2 class="post-title">Building Titles (Editing in LibAV part two!)</h2>

                        <p class="post-meta">
                            
                        </p>
                    </header>

                    <div class="post-description">
												<p>One of the biggest challenges with making a video in LibAV/FFmpeg is the lack of title cards.  Using the GIMP (or ImageMagick) you can make some very awesome title cards and convert them into a static video clip to be mixed in with your other clips.</p>

<p>If you rememeber the camera shot clips at 1080p 24fps h264.  We encoded the clips to 720p 24fps with Mpeg2Video.  An older video format, but gives us the advantage of using the “cat” command.</p>

<p><img src="/images/title-new-image.png" alt="New Image in GIMP" /></p>

<p>In the GIMP all you have to remember is to match the resolution.  Everything else will be done with LibAV.  Here is the image I made for this blog:</p>

<p><img src="/images/title-test.png" alt="Test Title" /></p>

<p>When we make this clip there are two things to keep in mind.  First, if there is no audio in this clip the following video clips’ audio will be offset.  Second, if the AV sync is off on this clip it was also effect the following clips.  This clip will be exactly 4 seconds.  Let’s make some noise… er silence:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>avconv -ar 48000 -ac 2 -f s16le -i /dev/zero -t 4 temp.wav
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>lame -b 256 temp.wav temp.mp3
</code></pre>
</div>

<p>This will convert solid zeros to pcm making a blank (quiet) track of 4 seconds with the same bitrate of the other clips.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>avconv -loop 1 -i title.png -r 23.976
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>-vcodec mpeg2video -vb 20M -t 4 tempvid.mpg
</code></pre>
</div>

<p>The “loop” command is what duplicates the single frame into 24 fps.  Also note the “-t 4″ again.  We now how a video and audio clip of the same length.  I think you can see where we go from here.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>avconv -i tempvid.mpg -i temp.mp3
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>-vcodec copy -acodec copy title.mpg
</code></pre>
</div>

<p>Now when you cat this clip with the others it will merge perfectly.</p>

<p><strong>PROTIP!</strong></p>

<p>If you have ImageMagick installed you can build a simple title image with this command:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>convert -size 1280×720 xc:black -font Ubuntu -pointsize 64 -fill white -draw “text 150,600 ‘Sample Text'” temp.png
</code></pre>
</div>

<p>It doesn’t look as good as the GIMP and I haven’t figured out a good way to center the text yet, but it works in a pinch.  Perhaps someone better at ImageMagick can help out with that.</p>

                    </div>
                </section>
            </div>



    <div class="footer">
                <div class="pure-menu pure-menu-horizontal">
                    <ul>
                        <li class="pure-menu-item"><a href="https://github.com/arthursucks" class="pure-menu-link">Github</a></li>
                        <li class="pure-menu-item"><a href="https://twitter.com/arthursucks" class="pure-menu-link">Twitter</a></li>
                        <li class="pure-menu-item"><p class="rss-subscribe"><a href="/feed.xml">RSS</a></p></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>


  </body>

</html>
